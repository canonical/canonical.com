{% extends "base_index.html" %}

{% block title %}{{ article.title.rendered|safe }}{% endblock %}
{% block meta_description %}{{ article.excerpt.raw }}{% endblock %}
{% block meta_image %}{{ article.image.source_url }}{% endblock %}

{% block body_class %}blog-article{% endblock %}
{% block canonical_url %}{% if 2996 in article.tags %}https://snapcraft.io/blog/{{ article.slug }}{% elif 4059 in article.tags %}https://juju.is/blog/{{ article.slug }}{% elif 1304 in article.tags or 3681 in article.tags -%}https://maas.io/blog/{{ article.slug }}{% else %}{{ super() }}{% endif %}{% endblock canonical_url %}
{% block extra_metatags %}
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@id": "https://canonical.com/#article",
    "@type": "Article",
    "name": "{{ article.title.renderered|safe }}",
    "headline": "{{ article.excerpt.raw }}",
    "author": {
       "@type": "Person",
       "name": "{{ article.author.name }}"
    },
    "datePublished": "{{ article.date_gmt }}",
    {% if article.image and article.image.source_url %}
      "image": "{{ article.image.source_url }}",
    {% endif %}
    "url": "{{ request.url }}",
    "publisher": {
      "@type": "Organization",
      "name": "Ubuntu"
    }
  }
  </script>
{% endblock %}

{% block content %}
<div class="u-fixed-width">
  <nav class="p-breadcrumbs u-sv1" aria-label="Breadcrumbs">
    <ol class="p-breadcrumbs__items p-text--x-small-capitalised">
        <li class="p-breadcrumbs__item "><a href="/blog">Blog</a></li>
        <li class="p-breadcrumbs__item ">
          {% if "display_category" in article and article.display_category.name %}
          {% if article.display_category.name == 'Articles' %}
            Article
          {% elif article.display_category.name == 'Case studies' %}
            Case study
          {% elif article.display_category.name == 'News' %}
            News
          {% elif article.display_category.name == 'Webinars' %}
            Webinar
          {% elif article.display_category.name == 'White papers' %}
            White paper
          {% else %}
            {{ article.display_category.name }}
          {% endif %}
        {% else %}
          Article
        {% endif %}
      </li>
    </ol>
  </nav>
<article>
  <hr class="p-rule is-fixed-width">
  <header class="p-section">
    <div class="row">
      <div class="col-3 col-medium-2">
        <div class="p-media-object">
          {% if article.author %}
          <div class="p-image-wrapper"><img src="{% if article.author.id == 217 %}https://assets.ubuntu.com/v1/60d9b81e-picto-canonical.svg{% else %}{{ article.author.avatar_urls['96'] }}{% endif %}" class="p-media-object__image" alt=""></div>
          {% endif %}
        
          <div class="p-media-object__details">
            {% if article.author %}
            <h3 class="p-media-object__title p-heading--5">
              <a href="/blog/author/{{ article.author.slug }}" title="More about {{ article.author.name }}">{{ article.author.name }}</a>
            </h3>
            {% endif %}
            <p class="p-media-object__content">on {{ article.date }}</p>
          </div>
        </div>
      </div>
      <div class="col-9">
        <h1>{{ article.title.rendered|safe }}</h1>
          
        {% if tags %}
          {%- for tag in tags -%}
            <a class="p-chip--information" href="/blog/tag/{{ tag.slug }}">
              <span class="p-chip__value">
                  {{ tag.name }}
              </span>
            </a>
          {%- endfor -%}
        {% endif %}
        
        <p>Share on:&nbsp;&nbsp;
          <div class="p-image-wrapper">
            <a class="p-link--inverted p-icon--facebook" title="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.canonical.com/blog/{{ article.slug }}">
              Facebook
            </a> &nbsp;&nbsp;
            <a class="p-link--inverted p-icon--twitter" title="Share on Twitter" href="https://twitter.com/share?text={{ article.title.rendered|safe|urlencode }}&amp;url=https://www.canonical.com/blog/{{ article.slug }}&amp;hashtags=ubuntu">
              Twitter
            </a> &nbsp;&nbsp;
            <a class="p-link--inverted p-icon--linkedin" title="Share on LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.canonical.com/blog/{{ article.slug }}&amp;title={{ article.title.rendered|safe|urlencode }}">
              LinkedIn
            </a>
          </div>
        </p>
      </div>
    </div>
  </div>
  </header>

  <section class="p-section">
    <hr class="is-fixed-width">
    <div class="row">
      <div class="col-3 u-pad--right">
        <div class="p-block">
          <h2 class="p-muted-heading">Newsletter signup</h2>
        </div>
        <form action="https://ubuntu.com/marketo/submit" method="post" id="mktoForm_1212" onsubmit="ga('send', 'Newsletter', 'Signup', 'New homepage newsletter signup');">
          <p >Select topics you're <br />interested in:</p>
    
          <ul class="p-list">
            <li class="p-list__item u-clearfix">
              <label class="p-checkbox">
                <input class="p-checkbox__input" type="checkbox" aria-labelledby="insightscloudserver" name="insightscloudserver" value="true" />
                <span class="p-checkbox__label" id="insightscloudserver">Cloud and Server</span>
              </label>
            </li>
    
            <li class="p-list__item u-clearfix">
              <label class="p-checkbox">
                <input class="p-checkbox__input" type="checkbox" aria-labelledby="insightsdesktop" name="insightsdesktop" value="true" />
                <span class="p-checkbox__label" id="insightsdesktop">Desktop</span>
              </label>
            </li>
    
            <li class="p-list__item u-clearfix">
              <label class="p-checkbox">
                <input class="p-checkbox__input" type="checkbox" aria-labelledby="insightsiot" name="insightsiot" value="true" />
                <span class="p-checkbox__label" id="insightsiot">Internet of Things</span>
              </label>
            </li>
    
            <li class="p-list__item u-clearfix">
              <label class="p-checkbox">
                <input class="p-checkbox__input" aria-labelledby="insightsrobotics" name="insightsrobotics" value="true" type="checkbox">
                <span class="p-checkbox__label" id="insightsrobotics">Robotics</span>
              </label>
            </li>
    
            <li class="p-list__item u-clearfix">
              <label class="p-checkbox">
                <input class="p-checkbox__input" aria-labelledby="insightstutorials" name="insightstutorials" value="true" type="checkbox">
                <span class="p-checkbox__label" id="insightstutorials">Tutorials</span>
              </label>
            </li>
            {# These are honey pot fields to catch bots #}
            <li class="u-off-screen">
              <label class="website" for="website">Website:</label>
              <input name="website" type="text" class="website" autocomplete="off" value="" id="website" tabindex="-1" />
            </li>
            <li class="u-off-screen">
              <label class="name" for="name">Name:</label>
              <input name="name" type="text" class="name" autocomplete="off" value="" id="name" tabindex="-1" />
            </li>
            {# End of honey pots #}
          </ul>
    
          <label for="email">
            <span>Work email: <span>*</span></span>
          </label>
          <input required id="email" name="email" maxlength="255" type="email" pattern="^[^ ]+@[^ ]+\.[a-z]{2,26}$"/>
          <p>
            In submitting this form, I confirm that I have read and agree to <a href="https://ubuntu.com/legal/data-privacy/newsletter">Canonical's Privacy Notice</a> and <a href="https://ubuntu.com/legal/data-privacy">Privacy Policy</a>.
          </p>
        
          <div>
            <span class="p-card--content">
              <button type="submit" class="u-no-margin--bottom">Subscribe now</button>
            </span>
    
            <input value="1212" name="formid" type="hidden">
            <input type="hidden" name="Consent_to_Processing__c" value="yes" />
            <input type="hidden" aria-hidden="true" aria-label="hidden field" name="returnURL" value="https://canonical.com/blog#success" />
            <input type="hidden" aria-hidden="true" aria-label="hidden field" name="utm_campaign" id="utm_campaign" value="" />
            <input type="hidden" aria-hidden="true" aria-label="hidden field" name="utm_medium" id="utm_medium" value="" />
            <input type="hidden" aria-hidden="true" aria-label="hidden field" name="utm_source" id="utm_source" value="" />
            <input type="hidden" aria-hidden="true" aria-label="hidden field" name="utm_content" id="utm_content" value="" />
            <input type="hidden" aria-hidden="true" aria-label="hidden field" name="utm_term" id="utm_term" value="" />
            <input type="hidden" aria-hidden="true" aria-label="hidden field" name="GCLID__c" id="GCLID__c" value="" />
            <input type="hidden" aria-hidden="true" aria-label="hidden field" name="Facebook_Click_ID__c" id="Facebook_Click_ID__c" value="" />
            <input type="hidden" name="thankyoumessage" value="Thank you for subscribing!<br />You will begin receiving emails as new content is posted. You may unsubscribe any time by clicking the link in the email.">
          </div>
        </form>
      </div>
      <div class="col-9">
        {{ article.content.rendered|safe }}
      </div>
    </div>
  </section>
</article>

{% if related_articles %}

<section class="p-section">
  <div class="u-fixed-width">
    <h4 class="p-muted-heading">Related posts</h4>
  </div>

  {% for related_article in related_articles %}
  <hr class="p-rule is-fixed-width">
  <div class="p-block row">
    <div class="col-3 col-medium-2">
      <p><a href="/blog/author/{{article.author.slug}}">{{ related_article.author.name }}</a>
        <br>{{ related_article.date }}
      </p>
    </div>

    <div class="col-6 col-medium-4">
      <div class="p-block">
        <h3 class="p-heading--2">
          <a href="/blog/{{ related_article.slug }}">{{ related_article.title.rendered|safe }}</a>
        </h3>
      </div>
      <p class="u-hide--small">
        {{ related_article.excerpt.raw.replace("[…]", "")|truncate(1000) }}...
      </p>

      <span class="p-chip--information">
        <span class="p-chip__value">
        {% if request.path == "topic/blog/cloud-and-server" %}
              Cloud and Server
          {% elif request.path == "topic/blog/desktop" %}
              Desktop
          {% elif request.path == "topic/blog/internet-of-things" %}
              Internet of Things
          {% else %}
            {% if related_article.group %}
              {{ related_article.group.name }}
            {% else %}
              Ubuntu
            {% endif %}
          {% endif %}
        </span>
      </span>
        <span class="p-chip--information">
          <span class="p-chip__value">
            {% include 'blog/singular-category.html' %}
          </span>
        </span>
      </div>

      <div class="col-2 col-start-large-11 u-hide--medium u-hide--small">
        {% if related_article.image and related_article.image.source_url %}
        <div class="u-aspect-ratio--3-2">
          <a href="/blog/{{ article.slug }}" aria-hidden="true" tabindex="-1">
            <div class="p-image-wrapper">{{ article.image.rendered|safe }}</div>
          </a>
        </div>
        {% endif %}
      </div>
  </div>
  {% endfor %}

</section>
{% endif %}
{% endblock %}
